<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Validar Documento en Blockchain</title>
</head>
<body>
  <h1>Validar Documento en Blockchain</h1>

  <button id="connectButton">Conectar MetaMask</button>
  <div id="status"></div>

  <script type="module">
    async function connectMetaMask() {
      if (typeof window.ethereum === 'undefined') {
        document.getElementById("status").innerText = "MetaMask no está instalada.";
        alert("Por favor, instala MetaMask desde https://metamask.io/");
        return;
      }

      try {
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        const account = accounts[0];
        document.getElementById("status").innerText = "Conectado como: " + account;
      } catch (err) {
        document.getElementById("status").innerText = "Conexión cancelada.";
      }
    }

    document.getElementById("connectButton").addEventListener("click", connectMetaMask);
  </script>
  // SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract DocumentRegistry {
    mapping(bytes32 => bool) public registeredDocuments;

    event DocumentRegistered(bytes32 indexed docHash, address indexed owner);

    function registerDocument(bytes32 docHash) public {
        require(!registeredDocuments[docHash], "Documento ya registrado");
        registeredDocuments[docHash] = true;
        emit DocumentRegistered(docHash, msg.sender);
    }

    function isRegistered(bytes32 docHash) public view returns (bool) {
        return registeredDocuments[docHash];
    }
}

</body>
</html>
